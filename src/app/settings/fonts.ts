'use client'

export const FONTS: Font[] = [
  {
    label: '系统默认',
    value: 'font-default',
    type: 'ht',
    typeName: '黑体',
    url: ''
  },
  {
    label: '思源黑体',
    value: 'font-syht',
    type: 'ht',
    typeName: '黑体',
    url: 'https://fontsapi.zeoseven.com/69/main/result.css'
  },
  {
    label: '文源黑体',
    value: 'font-wyht',
    type: 'ht',
    typeName: '黑体',
    url: 'https://fontsapi.zeoseven.com/13/main/result.css'
  },
  {
    label: '更纱黑体',
    value: 'font-gsht',
    type: 'ht',
    typeName: '黑体',
    url: 'https://fontsapi.zeoseven.com/159/main/result.css'
  },
  {
    label: '霞鹜新晰黑',
    value: 'font-xwxxh',
    type: 'ht',
    typeName: '黑体',
    url: 'https://fontsapi.zeoseven.com/19/main/result.css'
  },
  {
    label: '思源宋体',
    value: 'font-syst',
    type: 'st',
    typeName: '宋体',
    url: 'https://chinese-fonts-cdn.deno.dev/packages/syst/dist/SourceHanSerifCN/result.css'
  },
  {
    label: '霞鹜新致宋',
    value: 'font-xwxzs',
    type: 'st',
    typeName: '宋体',
    url: 'https://chinese-fonts-cdn.deno.dev/packages/LxgwNeoZhiSong/dist/LXGWNeoZhiSong/result.css'
  },
  {
    label: '飞花宋体',
    value: 'font-fhst',
    type: 'st',
    typeName: '宋体',
    url: 'https://chinese-fonts-cdn.deno.dev/packages/fhst/dist/%E9%A3%9E%E8%8A%B1%E5%AE%8B%E4%BD%93/result.css'
  },
  {
    label: '京華老宋体',
    value: 'font-jhlst',
    type: 'st',
    typeName: '宋体',
    url: 'https://chinese-fonts-cdn.deno.dev/packages/jhlst/dist/%E4%BA%AC%E8%8F%AF%E8%80%81%E5%AE%8B%E4%BD%93v2_002/result.css'
  },
  {
    label: '朱雀仿宋',
    value: 'font-zqfs',
    type: 'st',
    typeName: '宋体',
    url: 'https://chinese-fonts-cdn.deno.dev/packages/zqfs/dist/ZhuqueFangsong-Regular/result.css'
  },
  {
    label: '全字库正楷体',
    value: 'font-qzkzkt',
    type: 'kt',
    typeName: '楷体',
    url: 'https://fontsapi.zeoseven.com/36/main/result.css'
  },
  {
    label: '寒蝉正楷体',
    value: 'font-ChillKai',
    type: 'kt',
    typeName: '楷体',
    url: 'https://fontsapi.zeoseven.com/5/main/result.css'
  },
  {
    label: '霞鹜文楷 Bright',
    value: 'font-xwwk',
    type: 'kt',
    typeName: '楷体',
    url: 'https://chinese-fonts-cdn.deno.dev/packages/lxgwwenkaibright/dist/LXGWBright-Medium/result.css'
  },
  {
    label: '润植家如印奏章楷',
    value: 'font-rzjryzzk',
    type: 'kt',
    typeName: '楷体',
    url: 'https://chinese-fonts-cdn.deno.dev/packages/rzjryzzk/dist/nzgrRuYinZouZhangKai/result.css'
  },
  {
    label: '澳声通拼音文楷',
    value: 'font-astpywk',
    type: 'kt',
    typeName: '楷体',
    lineHeight: 'leading-[1.5]',
    url: 'https://chinese-fonts-cdn.deno.dev/packages/ToneOZ-Pinyin-WenKai/dist/ToneOZ-Pinyin-WenKai-Bold/result.css'
  },
  {
    label: '抖音美好体',
    value: 'font-dymht',
    type: 'yt',
    typeName: '圆体',
    url: 'https://chinese-fonts-cdn.deno.dev/packages/dymh/dist/DouyinSansBold/result.css'
  },
  {
    label: '寒蝉全圆体',
    value: 'font-hcqyt',
    type: 'yt',
    typeName: '圆体',
    url: 'https://chinese-fonts-cdn.deno.dev/packages/hcqyt/dist/ChillRoundFRegular/result.css'
  },
  {
    label: '文源圆体',
    value: 'font-wyyt',
    type: 'yt',
    typeName: '圆体',
    url: 'https://fontsapi.zeoseven.com/414/main/result.css'
  },
  {
    label: '猫啃珠圆体',
    value: 'font-mkzyt',
    type: 'yt',
    typeName: '圆体',
    url: 'https://chinese-fonts-cdn.deno.dev/packages/mkzyt/dist/%E7%8C%AB%E5%95%83%E7%8F%A0%E5%9C%86%E4%BD%93/result.css'
  },
  {
    label: 'Maple Mono',
    value: 'font-mm',
    type: 'qt',
    typeName: '其他',
    url: 'https://chinese-fonts-cdn.deno.dev/packages/maple-mono-cn/dist/MapleMono-CN-Regular/result.css'
  },
  {
    label: '得意黑',
    value: 'font-dyh',
    type: 'qt',
    typeName: '其他',
    url: 'https://chinese-fonts-cdn.deno.dev/packages/dyh/dist/SmileySans-Oblique/result.css'
  },
  {
    label: '霞鹜漫黑',
    value: 'font-xwmh',
    type: 'qt',
    typeName: '其他',
    url: 'https://fontsapi.zeoseven.com/134/main/result.css'
  },
  {
    label: '游趣体',
    value: 'font-yqt',
    type: 'qt',
    typeName: '其他',
    url: 'https://chinese-fonts-cdn.deno.dev/packages/yqt/dist/ChildFunSans-Demo/result.css'
  },
  {
    label: '云峰飞云体',
    value: 'font-yffyt',
    type: 'qt',
    typeName: '其他',
    url: 'https://fontsapi.zeoseven.com/446/main/result.css'
  },
  {
    label: '也字工厂小石头',
    value: 'font-yzgcxst',
    type: 'qt',
    typeName: '其他',
    url: 'https://chinese-fonts-cdn.deno.dev/packages/yzgcxst/dist/%E4%B9%9F%E5%AD%97%E5%B7%A5%E5%8E%82%E5%B0%8F%E7%9F%B3%E5%A4%B4/result.css'
  },
  {
    label: '目哉像素体',
    value: 'font-mzxst',
    type: 'qt',
    typeName: '其他',
    url: 'https://chinese-fonts-cdn.deno.dev/packages/mzxst/dist/MZPXflat/result.css'
  },
]

class FontLoader {
  private loadedFonts: Set<string>;

  constructor() {
    this.loadedFonts = new Set()
  }

  /**
   * 动态加载字体
   * @param {string} fontFamily 字体名称
   * @param {string} fontUrl 字体的CSS文件URL
   */
  loadFont(fontFamily: string, fontUrl?: string) {
    if (!fontUrl) {
      return
    }
    // 检查字体是否已经加载过
    if (this.loadedFonts.has(fontFamily)) {
      return Promise.resolve()
    }
    // 创建 link 元素
    const linkElement = document.createElement('link')
    linkElement.rel = 'stylesheet'
    linkElement.href = fontUrl
    // 添加到 head 中
    document.head.appendChild(linkElement)
    // 记录已加载的字体
    this.loadedFonts.add(fontFamily)

    // 返回一个 promise，监听字体加载完成事件
    return document.fonts.ready
      .then(() => {
        console.log(`${fontFamily} 字体加载完成`)
      })
      .catch((error) => {
        console.error(`加载 ${fontFamily} 字体时出错:`, error)
      })
  }
}

export const fontLoader = new FontLoader()
